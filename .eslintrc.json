{
  "extends": [
    "next/core-web-vitals",
    "plugin:@typescript-eslint/recommended"
  ],
  "plugins": [
    "@typescript-eslint",
    "styled-components-a11y"
  ],
  "rules": {
    // Prevent display: none usage on handles
    "no-restricted-properties": [
      "error",
      {
        "object": "style",
        "property": "display",
        "message": "Use opacity and pointer-events for handle visibility instead of display property"
      }
    ],

    // Enforce design system usage
    "@typescript-eslint/no-magic-numbers": [
      "warn",
      {
        "ignore": [-1, 0, 1, 2],
        "ignoreArrayIndexes": true,
        "ignoreDefaultValues": true,
        "ignoreEnums": true,
        "ignoreReadonlyClassProperties": true
      }
    ],

    // Enforce proper handle positioning
    "no-restricted-syntax": [
      "error",
      {
        "selector": "JSXElement[openingElement.name.name='NodeHandle'][attributes.length=0]",
        "message": "NodeHandle must specify type and position props"
      }
    ],

    // Prevent inline styles
    "react/forbid-dom-props": [
      "error",
      {
        "forbid": ["style"]
      }
    ],

    // Enforce proper component structure
    "react/function-component-definition": [
      "error",
      {
        "namedComponents": "function-declaration",
        "unnamedComponents": "arrow-function"
      }
    ],

    // Enforce proper prop types
    "@typescript-eslint/explicit-module-boundary-types": "error",

    // Prevent direct DOM manipulation
    "no-restricted-globals": [
      "error",
      {
        "name": "document",
        "message": "Use React refs instead of direct DOM manipulation"
      }
    ],

    // Custom rules for styled-components
    "styled-components-a11y/no-outline-none": "error",
    
    // Enforce proper imports
    "no-restricted-imports": [
      "error",
      {
        "paths": [
          {
            "name": "styled-components",
            "message": "Import from styled-components/macro instead"
          }
        ],
        "patterns": [
          {
            "group": ["*/styles/*"],
            "message": "Import from design-system instead"
          }
        ]
      }
    ],

    // Enforce proper handle placement
    "no-restricted-syntax": [
      "error",
      {
        "selector": "JSXElement[openingElement.name.name='NodeContainer'] > JSXElement:not([openingElement.name.name='NodeHandle'])",
        "message": "Target handle must be the first child of NodeContainer"
      }
    ]
  },
  "overrides": [
    {
      "files": ["src/components/nodes/*.tsx"],
      "rules": {
        // Specific rules for node components
        "@typescript-eslint/explicit-function-return-type": "error",
        "react/require-default-props": "error"
      }
    }
  ],
  "settings": {
    "react": {
      "version": "detect"
    }
  }
} 